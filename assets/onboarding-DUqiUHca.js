import"./modulepreload-polyfill-B5Qt9EMX.js";import{o as l}from"./firebase-BrtCog--.js";document.addEventListener("DOMContentLoaded",s);const d=["Africa (Central)","Africa (Eastern)","Africa (Southern)","Africa (Western)","Asia (Central)","Asia (Eastern)","Asia (Southern)","Asia (Southeastern)","Asia (Western)","Australia & Pacific","Europe (Central)","Europe (Eastern)","Europe (Western)","North America (Central)","North America (Eastern)","North America (Mountain)","North America (Pacific)","North America (Western)","South America (Andean)","South America (Brazilian)","South America (Southern)","South America (Western)"],u={"Africa/":"Africa","Asia/":"Asia","Australia/":"Australia & Pacific","Europe/":"Europe","America/New_York":"North America (Eastern)","America/Chicago":"North America (Central)","America/Denver":"North America (Mountain)","America/Los_Angeles":"North America (Pacific)","America/Argentina/":"South America (Southern)","America/Sao_Paulo":"South America (Brazilian)","America/Lima":"South America (Western)","Pacific/":"Australia & Pacific"},m="https://binarybandits-profileapi.onrender.com/api/profile";function g(){const t=document.getElementById("regionOptions");t.innerHTML="",d.forEach(n=>{const e=document.createElement("div");e.className="dropdown-option",e.textContent=n,e.addEventListener("click",()=>{document.getElementById("region").value=n,t.style.display="none"}),t.appendChild(e)})}function p(){try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone;document.getElementById("detectedLocation").textContent=`Detected timezone: ${t}`;for(const[n,e]of Object.entries(u))if(t.includes(n)){document.getElementById("region").value=e,document.getElementById("detectedLocation").textContent+=` | Suggested region: ${e}`;break}}catch{document.getElementById("detectedLocation").textContent="Could not detect your timezone"}}async function s(){const t=document.querySelector(".languages");try{const n=await fetch("https://api.languagetoolplus.com/v2/languages");if(!n.ok)throw new Error("Network response was not ok "+n.status);const e=await n.json(),i=new Set;e.forEach(o=>{let r=o.name.split("(")[0].trim();i.add(r)});const a=Array.from(i).sort();t.innerHTML='<option value="">-- Select Language --</option>',a.forEach(o=>{const r=document.createElement("option");r.textContent=o,r.value=o.toLowerCase(),t.appendChild(r)})}catch(n){console.error("Error loading languages:",n),t.innerHTML='<option value="">Error loading languages</option>'}}document.addEventListener("DOMContentLoaded",function(){g(),p(),s();const t=document.getElementById("region"),n=document.getElementById("regionOptions");t.addEventListener("focus",()=>{n.style.display="block"}),t.addEventListener("input",()=>{const e=t.value.toLowerCase();document.querySelectorAll(".dropdown-option").forEach(a=>{const o=a.textContent.toLowerCase();a.style.display=o.includes(e)?"block":"none"}),n.style.display="block"}),document.addEventListener("click",e=>{!t.contains(e.target)&&!n.contains(e.target)&&(n.style.display="none")}),l(async e=>{e?(e.uid,document.getElementById("profileForm").addEventListener("submit",async function(i){i.preventDefault();const a={ageRange:document.getElementById("ageRange").value,region:document.getElementById("region").value,languages:document.getElementById("languages").value.split(",").map(c=>c.trim()),gender:document.getElementById("gender").value,hobbies:document.getElementById("hobbies").value.split(",").map(c=>c.trim()),bio:document.getElementById("bio").value,createdAt:new Date,secret:"groupBKPTN9",username:null},o=await e.getIdToken(!0);(await fetch(`${m}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(a)})).ok?(alert("Profile created successfully ðŸŽ‰"),window.location.href="./userdashboard.html"):alert("Error saving profile. Please try again.")})):(alert("You need to be logged in to create a profile."),window.location.href="login.html")})});
